{"version":3,"sources":["startup.js"],"names":["jQuery","$","enableMediaElementPlayer","audioElement","mediaelementplayer","startVolume","success","mediaElement","domObject","addEventListener","size","wrapper","parents","label","document","title","data","ga","err","dataset","fumsToken","fums","console","log","removeAttribute","initClipText","each","self","this","clipText","get","scrollWidth","offsetWidth","addClass","removeClass","window","on","find","width","select","length","css","text","append","e","keyCode","$footnote","$placeholder","replaceWith","jBox","attach","trigger","content","closeOnClick","t","targetHash","attr","split","toggleTarget","hasClass","location","hash","hide","stopPropagation","preventDefault","target","slideToggle","toggleClass","audioElements","url","encodeURIComponent","bibleId","chapterId","ajax","dataType","response","status","jqxhr","expirationString","Date","expiresAt","toUTCString","sourceElement","createElement","id","src","resourceUrl","type","expiration","appendChild","meta","error","setAudioSource","change","submit","val","$readForm","$refreshContainer","event","newLocation","toLowerCase","refreshUrl","serialize","load","responseText","textStatus","jqXHR","$selectedOption","newTranslationId","newAbbreviation","prop","selectric","nativeOnMobile","ResponsiveHelper","addRange","..991","sec","prim","add","destroy","primtab","clone","sectab","tabbar","prepend","is","show","setTimeout","off","remove","preventWindowScroll","onOpen","niceScroll","cursorwidth","cursorcolor","zindex","railpadding","top","right","left","bottom","autohidemode","getNiceScroll","resize","biblica","onlineBibleVersion","closest","datepicker","firstDay","dateFormat","dayNames","dayNamesMin","onUpdateDatepicker","obj","input","onClose","_","beforeShow","ins","instHeight","dpDiv","height","inputPos","getBoundingClientRect","position","my","at","collision","of","transform","click","next","focus","blur","hoverTooltip","tooltipStructure","openClose","activeClass","opener","slider","animSpeed","hideOnClickOutside","animStart","isOpen","tabset","tabLinks","addToParent","defaultTab","768..","stickyScrollBlock","setBoxHeight","container","positionType","extraTop","extraBottom","activeItem","setPos","parentOffsetLeft","offset","activeItemOffsetLeft","scrollLeft","win","items","maxHeight","resizeHandler","removeAttr","itemHeight","outerHeight","OpenClose","options","extend","addClassBeforeAnimation","effect","init","prototype","holder","findElements","attachEvents","makeCallback","eventHandler","slideHiddenClass","showSlide","hideSlide","outsideClickHandler","toggleEffects","box","speed","complete","display","removeData","name","args","Array","slice","call","arguments","shift","apply","tabStyleSheet","tabStyleRule","styleSheet","cssText","createTextNode","slide","o","stop","slideDown","slideUp","fade","fadeIn","fadeOut","none","fn","opt","method","$holder","instance","tooltipWidth","tooltipHeight","tooltipSelector","positionTypeX","positionTypeY","attribute","extraOffsetX","extraOffsetY","showOnTouchDevice","tooltip","html","children","tooltipTextBox","showTooltip","item","appendTo","body","outerWidth","moveTooltip","hideTooltip","x","pageX","y","pageY","tooltipText","isTouchDevice","bind","originalEvent","changedTouches","getEvent","one","DocumentTouch","$win","Tabset","$tabLinks","setStartActiveIndex","setActiveTab","autoHeight","$tabHolder","eq","attrib","parent","activeIndex","$classTargets","getClassTarget","$activeLink","filter","$hashLink","checkHash","index","activeTabIndex","prevTabIndex","i","link","$link","$classTarget","$tab","tabHiddenClass","attachTabLink","switchTabs","resizeHolder","$prevLink","$nextLink","$prevTab","getTab","$nextTab","haveTabHolder","getActiveTab","StickyScrollBlock","$stickyBox","StickyScrollBlockPrototype","$container","isWrap","moveInContainer","$stickyBoxWrap","wrap","getWrapClass","parentForActive","getParentForActive","isInit","onResize","resetState","recalculateOffsets","checkStickyPermission","scrollHandler","onScroll","defineExtraTop","Math","min","winParams","boxFullHeight","isStickyEnabled","containerOffsetTop","containerHeight","boxOffsetTop","map","join","stickyFlag","-webkit-transition","-webkit-transform","transition","getWindowParams","getBoxOffsets","getContainerOffsets","boxOffset","boxPosition","boxOffsetLeft","boxTopPosition","boxLeftPosition","boxHeight","boxWidth","containerOffset","containerOffsetLeft","innerHeight","documentElement","clientHeight","unwrap","stickyMethods","fixed","winScrollTop","scrollTop","showAfterScrolled","stickyOn","stickyOff","setDynamicPosition","getTopPosition","currScrollTop","absolute","clearTimer","timer","animDelay","clearTimeout","topPosition","max","currTopPosition","abs","prevWinWidth","handlers","nativeMatchMedia","winWidth","rangeObject","property","currentActive","matchRange","range","disableCallback","enableCallback","r1","r2","mediaQueryString","Infinity","query","matchMedia","matches","styleMedia","matchMedium","media","matchQuery","Window","toString","indexOf","ranges","result","rangeStr","rangeData","parseInt","sort","a","b","push"],"mappings":"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","file":"startup.min.js","sourcesContent":["/*\n * Copyright Â© 2022 by Biblica, Inc. (https://www.biblica.com)\n * Licensed under MIT (https://opensource.org/licenses/MIT)\n */\n\n/*\n * STARTUP SCRIPTS\n */\n\n// Initialize on document ready.\njQuery(function() {\n\tvar $ = jQuery;\n\n\tfunction setAudioSource(audioElement) {\n\t\tlet url = '/wp-admin/admin-ajax.php?action=audio_bible_chapter';\n\t\turl += '&bible-id=' + encodeURIComponent(audioElement.dataset.bibleId);\n\t\turl += '&chapter=' + encodeURIComponent(audioElement.dataset.chapterId);\n\t\t$.ajax({\n\t\t\tdataType: \"json\",\n\t\t\turl: url,\n\t\t\tsuccess: function(response, status, jqxhr) {\n\t\t\t\tif (response !== null && response !== '' && response.data !== null) {\n\t\t\t\t\tlet data = response.data;\n\t\t\t\t\tlet expirationString = new Date(data.expiresAt * 1000).toUTCString();\n\t\t\t\t\tlet sourceElement = document.createElement('source');\n\t\t\t\t\tsourceElement.id = 'bible-audio-source';\n\t\t\t\t\tsourceElement.src = data.resourceUrl;\n\t\t\t\t\tsourceElement.type = 'audio/mpeg';\n\t\t\t\t\tsourceElement.dataset.expiration = data.expiresAt;\n\t\t\t\t\tsourceElement.dataset.expirationString = expirationString;\n\t\t\t\t\taudioElement.appendChild(sourceElement);\n\t\t\t\t\taudioElement.dataset.fumsToken = response.meta.fumsToken;\n\t\t\t\t\tconsole.log('Audio source element created.');\n\t\t\t\t\tenableMediaElementPlayer(audioElement);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('Ajax request succeeded. jQuery status: \"' + status + '\", Url: \"' + url + '\"');\n\t\t\t\t\tconsole.log('Audio source element not created.')\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(jqxhr, status, error) {\n\t\t\t\tconsole.log('Ajax request failed. jQuery status: \"' + status +\n\t\t\t\t\t'\", HTTP error: \"' + error +\n\t\t\t\t\t'\", Url: \"' + url + '\"');\n\t\t\t\tconsole.log('Audio source element not created.')\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction enableMediaElementPlayer(audioElement) {\n\t\t$(audioElement).mediaelementplayer({startVolume: 0.8, success: function(mediaElement,domObject) {\n\t\t\t\t// GA event tracking\n\t\t\t\tmediaElement.addEventListener('play', function() {\n\t\t\t\t\tif($('#online-bible').size()) {\n\t\t\t\t\t\tvar wrapper = $(domObject).parents('.version');\n\t\t\t\t\t\tvar label = document.title;\n\t\t\t\t\t\tif(wrapper.data('book') && wrapper.data('chapter') && wrapper.data('translation')) {\n\t\t\t\t\t\t\tlabel = wrapper.data('book') + ' ' + wrapper.data('chapter') + ' ' + wrapper.data('translation');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttry\t{\n\t\t\t\t\t\t\tga('send', 'event', 'Audio - Bible', 'Audio - play', label);\n\t\t\t\t\t\t} catch(err){}\n\n\t\t\t\t\t\tif (domObject.dataset.fumsToken) {\n\t\t\t\t\t\t\tfums('trackListen', domObject.dataset.fumsToken);\n\t\t\t\t\t\t\tconsole.log('fums(\"trackListen\", \"' + domObject.dataset.fumsToken + '\")');\n\t\t\t\t\t\t\tdomObject.removeAttribute('data-fums-token');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif($('.m-dailymanna-full').size()) {\n\t\t\t\t\t\ttry\t{\n\t\t\t\t\t\t\tga('send', 'event', 'Audio - Daily Manna', 'Audio - play');\n\t\t\t\t\t\t} catch(err){}\n\t\t\t\t\t}\n\n\t\t\t\t}, false);\n\t\t\t}\n\t\t});\n\t}\n\n\t// Setup Bible footnote icons and popups\n\t$('.f').each(function() {\n\t\tvar $footnote = $(this);\n\t\tvar $placeholder = $('<span class=\"footnote-icon\"></span>');\n\t\t$footnote.replaceWith($placeholder);\n\n\t\tvar tooltip = new jBox('Tooltip', {\n\t\t\tattach: $placeholder,\n\t\t\ttrigger: 'click',\n\t\t\tcontent: $footnote,\n            closeOnClick: 'body'\n\t\t});\n\t});\n\n\t// Activate toggle links\n\t$('.toggle-link').each(function() {\n\t\tvar t = $(this);\n\t\tvar targetHash = '#'+t.attr('href').split('#')[1];\n\t\tvar toggleTarget = $(targetHash);\n\t\tif(!toggleTarget.hasClass('toggled') && document.location.hash !== targetHash) {\n\t\t\ttoggleTarget.hide();\n\t\t} else {\n\t\t\tt.addClass('toggled');\n\t\t}\n\t\tt.on('click touchstart', function(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tvar t = $(this);\n\t\t\tvar target = $(targetHash);\n\t\t\ttarget.slideToggle(100).toggleClass('toggled');\n\t\t\tt.toggleClass('toggled');\n\t\t\taudioElements = target.find('audio.bible-audio-player');\n\t\t\tif(t.hasClass('toggled') && audioElements.size()) {\n\t\t\t\taudioElements.each(function() {\n\t\t\t\t\tif ($(this).find('source').size() < 1) {\n\t\t\t\t\t\tsetAudioSource(this);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tenableMediaElementPlayer(this);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\n\t// TODO: keep?\n\tif (location.hash === '#listen') {\n\t\t$('.listen .toggle-link').trigger('click');\n\t}\n\n\t// TODO: keep?\n\t// Activate auto submit form widgets\n\t$('.auto-submit').change(function() {\n\t\t$(this).parents('form').submit();\n\t});\n\n\t$('div.select-link select').change(function() {\n\t\twindow.location = $(this).val();\n\t});\n\n\t$('.bible-widget-form form.read-form').each(function() {\n\t\tvar $readForm = $(this);\n\t\tvar $refreshContainer = $readForm.find('.auto-refresh');\n\n\t\t$readForm.on('submit', function(event) {\n            event.preventDefault();\n\t\t\tlet newLocation = '';\n\t\t\tlet urlType = $readForm.data('url-type');\n\t\t\tif (urlType === 'seo') {\n\t\t\t\tnewLocation = $readForm.data('base-url') +\n\t\t\t\t\t$readForm.find('#widget-read-translation option:selected').data('abbreviation').toLowerCase() + '/' +\n\t\t\t\t\t$readForm.find('#book').val() + '/' +\n\t\t\t\t\t$readForm.find('#chapter').val() + '/';\n\t\t\t} else {\n\t\t\t\tnewLocation = $readForm.data('base-url') +\n\t\t\t\t\t'?translationid=' + $readForm.find('#widget-read-translation').val() +\n\t\t\t\t\t'&book=' + $readForm.find('#book').val() +\n\t\t\t\t\t'&chapter=' + $readForm.find('#chapter').val();\n\t\t\t}\n\t\t\twindow.location = newLocation;\n\n\t\t\treturn false;\n\t\t});\n\n\t\tvar refreshUrl = $refreshContainer.data('refresh-url');\n\t\t$refreshContainer.on('change', '.refresh-trigger', function () {\n\t\t\t$refreshContainer.addClass('refreshing');\n\t\t\tvar data = $readForm.serialize();\n\n\t\t\t$refreshContainer.load(refreshUrl, data, function (responseText, textStatus, jqXHR) {\n\t\t\t\t$refreshContainer.removeClass('refreshing');\n\t\t\t\tlet $selectedOption = $('#widget-read-translation option:selected');\n\t\t\t\tlet newTranslationId = $selectedOption.val();\n\t\t\t\tlet newAbbreviation = $selectedOption.data('abbreviation')\n\t\t\t\t$('#widget-search-translation').val(newTranslationId);\n\t\t\t\t$('#widget-search-keywords').prop('placeholder', 'Search the ' + newAbbreviation + ' Bible');\n\t\t\t\t$refreshContainer.find('select.form-control').selectric({\n\t\t\t\t\tnativeOnMobile: false\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n\n\t$(function() {\n\t\tResponsiveHelper.addRange({\n\t\t\t'..991': {\n\t\t\t\ton: function() {\n\t\t\t\t\tif ($('#online-bible').size()) {\n\t\t\t\t\t\t// Handle tabs in Online Bible\n\t\t\t\t\t\t$('.bible-reader .version-secondary').each(function() {\n\t\t\t\t\t\t\tvar sec = $(this);\n\t\t\t\t\t\t\tvar prim = $('.bible-reader .version-primary');\n\n\t\t\t\t\t\t\tsec.find('select.form-control').add(prim.find('select.form-control')).each(function() {\n\t\t\t\t\t\t\t\tvar select = jQuery(this);\n\n\t\t\t\t\t\t\t\tif (select.data('selectric')) {\n\t\t\t\t\t\t\t\t\tselect.data('selectric').destroy()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tvar primtab = prim.find('.version-selector').clone();\n\t\t\t\t\t\t\tvar sectab = sec.find('.version-selector').clone();\n\t\t\t\t\t\t\tvar tabbar = $('<div class=\"header tab-header clearfix\"><div class=\"tab-primary\"></div><div class=\"tab-secondary\"></div>');\n\t\t\t\t\t\t\tsec.hide();\n\t\t\t\t\t\t\ttabbar.find('.tab-primary').append(primtab);\n\t\t\t\t\t\t\ttabbar.find('.tab-secondary').append(sectab);\n\t\t\t\t\t\t\t$('.bible-reader .version .version-selector .btn-group-close').hide();\n\n\t\t\t\t\t\t\tprimtab.find('.select').addClass('tab-active');\n\n\t\t\t\t\t\t\t$('.bible-reader').prepend(tabbar);\n\n\t\t\t\t\t\t\tprimtab.find('.select').on('click.select', function() {\n\t\t\t\t\t\t\t\tif (!prim.is(':visible')) {\n\t\t\t\t\t\t\t\t\tsec.hide();\n\t\t\t\t\t\t\t\t\tprim.show();\n\t\t\t\t\t\t\t\t\tsectab.find('.select').removeClass('tab-active');\n\t\t\t\t\t\t\t\t\tjQuery(this).addClass('tab-active');\n\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tinitClipText();\n\t\t\t\t\t\t\t\t\t}, 0)\n\n\t\t\t\t\t\t\t\t\tprimtab.find('select.form-control').selectric('close');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (primtab.find('.selectric-open').length) {\n\t\t\t\t\t\t\t\t\t\tprimtab.find('select.form-control').selectric('open');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tsectab.find('.select').on('click.select', function() {\n\t\t\t\t\t\t\t\tif (!sec.is(':visible')) {\n\t\t\t\t\t\t\t\t\tprim.hide();\n\t\t\t\t\t\t\t\t\tsec.show();\n\t\t\t\t\t\t\t\t\tprimtab.find('.select').removeClass('tab-active');\n\t\t\t\t\t\t\t\t\tjQuery(this).addClass('tab-active');\n\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tinitClipText();\n\t\t\t\t\t\t\t\t\t}, 0);\n\n\t\t\t\t\t\t\t\t\tsectab.find('select.form-control').selectric('close');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (sectab.find('.selectric-open').length) {\n\t\t\t\t\t\t\t\t\t\tsectab.find('select.form-control').selectric('open');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tsectab.find('select.form-control').add(primtab.find('select.form-control')).selectric({\n\t\t\t\t\t\t\t\tnativeOnMobile: false,\n\t\t\t\t\t\t\t\tstopPropagation: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\toff: function() {\n\t\t\t\t\tif ($('#online-bible').size()) {\n\t\t\t\t\t\t// Handle tabs in Online Bible\n\t\t\t\t\t\t$('.bible-reader .version-secondary').each(function() {\n\t\t\t\t\t\t\tvar sec = $(this);\n\t\t\t\t\t\t\tvar prim = $('.bible-reader .version-primary');\n\t\t\t\t\t\t\tvar primtab = prim.find('.version-selector');\n\t\t\t\t\t\t\tvar sectab = sec.find('.version-selector');\n\n\t\t\t\t\t\t\t$('.bible-reader .version').show();\n\t\t\t\t\t\t\t$('.bible-reader .version-selector .btn-group-close').show();\n\t\t\t\t\t\t\t$('.bible-reader .tab-header').remove();\n\n\t\t\t\t\t\t\tprimtab.find('.select').off('click.select');\n\t\t\t\t\t\t\tsectab.find('.select').off('click.select');\n\n\t\t\t\t\t\t\tprim.find('select.form-control').add(sec.find('select.form-control')).selectric({\n\t\t\t\t\t\t\t\tnativeOnMobile: false,\n\t\t\t\t\t\t\t\tstopPropagation: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\t$('select.form-control').selectric({\n\t\t\tnativeOnMobile: false,\n\t\t\tstopPropagation: true,\n\t\t\tpreventWindowScroll: false,\n\t\t\tonOpen: function() {\n\t\t\t\t$(\".selectric-scroll\").niceScroll({\n\t\t\t\t\tcursorwidth: \"8px\",\n\t\t\t\t\tcursorcolor: \"#cccccc\",\n\t\t\t\t\tzindex: 1,\n\t\t\t\t\trailpadding: {\n\t\t\t\ttop: 5,\n\t\t\t\tright: 5,\n\t\t\t\tleft: 0,\n\t\t\t\tbottom: 0\n\t\t\t  },\n\t\t\t  autohidemode: false,\n\t\t\t\t}).show();\n\t\t\t\t  $('.selectric-scroll').getNiceScroll().resize();\n\t\t\t},\n\t\t});\n\t});\n\n\t// TODO: keep?\n\t// Activate Bible reading navigation and tools\n\t$('#online-bible .version').each(function() {\n\t\tnew biblica.onlineBibleVersion(this);\n\t});\n\n\t// TODO: keep?\n\t// Activate datepickers\n\t$('input.datepicker').each(function() {\n\t\tvar t = $(this);\n\t\tif(t.hasClass('date-selector-datepicker')) {\n\t\t\tt.change(function() {\n\t\t\t\t$(this).closest('form').submit();\n\t\t\t});\n\t\t}\n\t\tt.datepicker({\n\t\t\tfirstDay: 0,\n\t\t\tdateFormat: 'yy-mm-dd',\n\t\t\tdayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n\t\t\tdayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n\t\t\tonUpdateDatepicker: function (obj) {\n\t\t\t\tjQuery(obj.input).closest('.btn-group').addClass('open');\n\t\t\t},\n\t\t\tonClose: function (_, obj) {\n\t\t\t\tjQuery(obj.input).closest('.btn-group').removeClass('open');\n\t\t\t},\n\t\t\tbeforeShow: function (obj, ins) {\n\t\t\t\tvar instHeight = 0;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tinstHeight = ins.dpDiv.height();\n\t\t\t\t\tvar inputPos = $(window).height() - jQuery(obj).closest('.btn-group')[0].getBoundingClientRect().bottom;\n\n\t\t\t\t\tif (ins.dpDiv.hasClass('ui-top') || ins.dpDiv.hasClass('ui-bottom')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (inputPos < instHeight) {\n\t\t\t\t\t\tins.dpDiv\n\t\t\t\t\t\t\t.removeClass('ui-top')\n\t\t\t\t\t\t\t.addClass('ui-bottom')\n\t\t\t\t\t\t\t.position({\n\t\t\t\t\t\t\t\tmy: 'left bottom',\n\t\t\t\t\t\t\t\tat: 'left top-50',\n\t\t\t\t\t\t\t\tcollision: 'none',\n\t\t\t\t\t\t\t\tof: \".btn-group.open input[id='date']\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tins.dpDiv\n\t\t\t\t\t\t\t.removeClass('ui-bottom')\n\t\t\t\t\t\t\t.addClass('ui-top')\n\t\t\t\t\t\t\t.position({\n\t\t\t\t\t\t\t\tmy: 'left top',\n\t\t\t\t\t\t\t\tat: 'left bottom+5',\n\t\t\t\t\t\t\t\tcollision: 'none',\n\t\t\t\t\t\t\t\tof: \".btn-group.open input[id='date']\",\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t\tins.dpDiv.css({\n\t\t\t\t\ttransform: \"translateY(15px)\",\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t});\n\t$('.toggle-datepicker').click(function (e) {\n\t\te.preventDefault();\n\t\t$(this).next().find('.datepicker').toggleClass(\"opened\");\n\t\tif($(this).next().find('.datepicker').hasClass('opened')) {\n\t\t\t$(this).next().find('.datepicker').focus();\n\t\t} else {\n\t\t\t$(\"#ui-datepicker-div\").removeClass('ui-top')\n\t\t\t$(\"#ui-datepicker-div\").removeClass('ui-bottom')\n\t\t\t$(this).next().find('.datepicker').blur();\n\t\t\t$(this).blur();\n\t\t}\n\t});\n\n\t\n\t$(window).click(function (e) {\n\t\tif($(e.target).hasClass(\"toggle-datepicker\")) {\n\t\t\treturn\n\t\t} else {\n\t\t\t$('.datepicker.opened').removeClass('opened');\n\t\t\t$(\".btn-group.open .toggle-datepicker\").blur();\n\t\t\t$(\"#ui-datepicker-div\").removeClass('ui-top')\n\t\t\t$(\"#ui-datepicker-div\").removeClass('ui-bottom')\n\t\t}\n\n\t})\n\n\t$(window).resize(function () {\n\t\tif ($(\".btn-group.open input[id='date']\").length > 0) {\n\t\t\tif ($(\"#ui-datepicker-div\").hasClass(\"ui-bottom\")) {\n\t\t\t\t$(\"#ui-datepicker-div\").position({\n\t\t\t\t\tmy: 'left bottom',\n\t\t\t\t\tat: 'left top-50',\n\t\t\t\t\tcollision: 'none',\n\t\t\t\t\tof: \".btn-group.open input[id='date']\",\n\t\t\t\t});\n\t\t\t} else if ($(\"#ui-datepicker-div\").hasClass(\"ui-top\")) {\n\t\t\t\t$(\"#ui-datepicker-div\").position({\n\t\t\t\t\tmy: 'left top',\n\t\t\t\t\tat: 'left bottom+5',\n\t\t\t\t\tcollision: 'none',\n\t\t\t\t\tof: \".btn-group.open input[id='date']\",\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\n\t\t}\n\t});\n\n\t// inits\n\tinitTooltip();\n\tinitOpenClose();\n\tinitTabs();\n\tinitStickyScrollBlock();\n\tinitClipText();\n\tinitPaginationScroll();\n\n\tjQuery(function() {\n\t\tinitSetHeight();\n\t});\n\n\t// hover tooltip init\n\tfunction initTooltip() {\n\t\tjQuery('.tools a, .tools button, .reviewsTools a').hoverTooltip({\n\t\t\ttooltipStructure: '<div class=\"hover-tooltip\"><div class=\"tooltip-text\"></div></div>',\n\t\t});\n\t}\n\n\tfunction initSetHeight() {\n\t\tvar win = jQuery(window);\n\n\t\tjQuery('.bible-reader-compared').each(function() {\n\t\t\tvar holder = jQuery(this);\n\t\t\tvar items = holder.find('.version-selector');\n\t\t\tvar maxHeight = 0;\n\n\t\t\tfunction resizeHandler() {\n\t\t\t\titems.removeAttr('style');\n\n\t\t\t\titems.each(function() {\n\t\t\t\t\tvar item = jQuery(this);\n\t\t\t\t\tvar itemHeight = item.outerHeight();\n\n\t\t\t\t\tif (itemHeight > maxHeight) {\n\t\t\t\t\t\tmaxHeight = itemHeight;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\titems.css({\n\t\t\t\t\theight: maxHeight\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tresizeHandler();\n\n\t\t\twin.on('resize orientationchange', resizeHandler);\n\t\t});\n\t}\n\n\t// open-close init\n\tfunction initOpenClose() {\n\t\tjQuery('.btn-group:not(.date-selector)').openClose({\n\t\t\tactiveClass: 'open',\n\t\t\topener: '.dropdown-toggle',\n\t\t\tslider: '.dropdown-menu',\n\t\t\tanimSpeed: 300,\n\t\t\thideOnClickOutside: true,\n\t\t\tanimStart: function (isOpen) {\n\t\t\t\tjQuery(this.opener).attr('aria-expanded', isOpen);\n\t\t\t},\n\t\t});\n\t}\n\n\t// content tabs init\n\tfunction initTabs() {\n\t\tjQuery('.nav-tabs').tabset({\n\t\t\ttabLinks: 'a',\n\t\t\taddToParent: true,\n\t\t\tdefaultTab: true,\n\t\t});\n\t}\n\n\t// initialize fixed blocks on scroll\n\tfunction initStickyScrollBlock() {\n\t\tResponsiveHelper.addRange({\n\t\t\t'768..': {\n\t\t\t\ton: function () {\n\t\t\t\t\tjQuery('.bible-api .version.col-md-12 .header .next').stickyScrollBlock({\n\t\t\t\t\t\tsetBoxHeight: false,\n\t\t\t\t\t\tactiveClass: 'fixed-position',\n\t\t\t\t\t\tcontainer: '.version',\n\t\t\t\t\t\tpositionType: 'fixed',\n\t\t\t\t\t\textraTop: 150,\n\t\t\t\t\t\textraBottom: 150,\n\t\t\t\t\t});\n\t\t\t\t\tjQuery('.bible-api .version.col-md-12 .header .prev').stickyScrollBlock({\n\t\t\t\t\t\tsetBoxHeight: false,\n\t\t\t\t\t\tactiveClass: 'fixed-position',\n\t\t\t\t\t\tcontainer: '.version',\n\t\t\t\t\t\tpositionType: 'fixed',\n\t\t\t\t\t\textraTop: 150,\n\t\t\t\t\t\textraBottom: 150,\n\t\t\t\t\t});\n\t\t\t\t\tjQuery('.reading-plans-header .next').stickyScrollBlock({\n\t\t\t\t\t\tsetBoxHeight: false,\n\t\t\t\t\t\tactiveClass: 'fixed-position',\n\t\t\t\t\t\tcontainer: '.m-reading-plans-full',\n\t\t\t\t\t\tpositionType: 'fixed',\n\t\t\t\t\t\textraTop: 150,\n\t\t\t\t\t\textraBottom: 150,\n\t\t\t\t\t});\n\t\t\t\t\tjQuery('.reading-plans-header .prev').stickyScrollBlock({\n\t\t\t\t\t\tsetBoxHeight: false,\n\t\t\t\t\t\tactiveClass: 'fixed-position',\n\t\t\t\t\t\tcontainer: '.m-reading-plans-full',\n\t\t\t\t\t\tpositionType: 'fixed',\n\t\t\t\t\t\textraTop: 150,\n\t\t\t\t\t\textraBottom: 150,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\toff: function () {\n\t\t\t\t\tjQuery('.bible-api .version.col-md-12 .header .next').stickyScrollBlock('destroy');\n\t\t\t\t\tjQuery('.bible-api .version.col-md-12 .header .prev').stickyScrollBlock('destroy');\n\t\t\t\t\tjQuery('.reading-plans-header .next').stickyScrollBlock('destroy');\n\t\t\t\t\tjQuery('.reading-plans-header .prev').stickyScrollBlock('destroy');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t// clipping text with gradient\n\tfunction initClipText() {\n\t\tjQuery('.bible-reader .header h2, #daily-manna .controls h2').each(function () {\n\t\t\tconst self = jQuery(this);\n\n\t\t\tclipText();\n\n\t\t\tjQuery(window).on('resize', clipText);\n\n\t\t\tfunction clipText() {\n\t\t\t\tif (self.get(0).scrollWidth > self.get(0).offsetWidth) {\n\t\t\t\t\tself.addClass('clip-text');\n\t\t\t\t} else {\n\t\t\t\t\tself.removeClass('clip-text');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tjQuery('.dropdown-toggle').each(function () {\n\t\t\tconst self = jQuery(this);\n\n\t\t\tclipText();\n\n\t\t\tjQuery(window).on('resize', clipText);\n\n\t\t\tfunction clipText() {\n\t\t\t\tif (self.find('.dropdown-toggle-text').width() + 72 > self.get(0).offsetWidth) {\n\t\t\t\t\tself.addClass('clip-text');\n\t\t\t\t} else {\n\t\t\t\t\tself.removeClass('clip-text');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tjQuery('.select').each(function () {\n\t\t\tconst self = jQuery(this);\n\t\t\tconst select = self.find('.form-control');\n\t\t\tconst html = `<div class=\"select-option-text sr-only\"></div>`;\n\n\t\t\tself.append(html);\n\t\t\tclipText();\n\n\t\t\tjQuery(window).on('resize', clipText);\n\t\t\tselect.on('change', clipText);\n\n\t\t\tselect.on('click', function () {\n\t\t\t\tselect.addClass('open');\n\t\t\t});\n\n\t\t\tselect.on('blur', function () {\n\t\t\t\tselect.removeClass('open');\n\t\t\t});\n\n\t\t\tjQuery(document).on('keyup', function (e) {\n\t\t\t\tif (e.keyCode == 27) {\n\t\t\t\t\tselect.removeClass('open');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction clipText() {\n\t\t\t\tif (select.length) {\n\t\t\t\t\tself.find('.select-option-text').css('width', select.get(0).offsetWidth).text(select.find('option:selected').text());\n\t\t\t\t}\n\n\t\t\t\tif (self.find('.select-option-text').get(0).scrollWidth > self.find('.select-option-text').get(0).offsetWidth) {\n\t\t\t\t\tself.addClass('clip-text');\n\t\t\t\t} else {\n\t\t\t\t\tself.removeClass('clip-text');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// pagination scroll position\n\tfunction initPaginationScroll() {\n\t\tjQuery('.pagination').each(function () {\n\t\t\tconst self = jQuery(this);\n\t\t\tconst activeItem = self.find('li.active');\n\n\t\t\tsetPos();\n\n\t\t\tjQuery(window).on('resize orientationChange', setPos);\n\n\t\t\tfunction setPos() {\n\t\t\t\tconst parentOffsetLeft = self.offset().left;\n\t\t\t\tconst activeItemOffsetLeft = activeItem.offset().left;\n\n\t\t\t\tif (activeItemOffsetLeft - parentOffsetLeft + activeItem.width() > self.width()) {\n\t\t\t\t\tself.scrollLeft(activeItemOffsetLeft - parentOffsetLeft - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n});\n\n// TODO: keep?\n\n// jQuery(window).bind('load resize orientationchange', function() {\n// \tvar $ = jQuery;\n// \t// Check if any tables are wider than their parent.\n// \t// If they are, wrap them in containers to allow for horizontal scrolling on small screens.\n// \t// Requires CSS rules in global.css (.scroll-table, .scroll-table:after .scroll-table > .scroll-table-inner).\n// \t$('table').each(function() {\n// \t\tvar table = $(this);\n// \t\tif (table.outerWidth() > table.parent().outerWidth()) {\n// \t\t\tconsole.log('Wide table: startup.js, line 333');\n// \t\t\talert('Wide table: startup.js, line 333');\n// \t\t\tif (!table.hasClass('scrollable')) {\n// \t\t\t\ttable.wrap('<div class=\"scroll-table\"><div class=\"scroll-table-inner\"></div></div>').addClass('scrollable');\n// \t\t\t}\n// \t\t} else if (table.hasClass('scrollable')) {\n// \t\t\ttable.removeClass('scrollable').unwrap().unwrap();\n// \t\t}\n// \t});\n//\n// });\n\n/*\n * jQuery Open/Close plugin\n */\n;(function($) {\n\tfunction OpenClose(options) {\n\t\tthis.options = $.extend({\n\t\t\taddClassBeforeAnimation: true,\n\t\t\thideOnClickOutside: false,\n\t\t\tactiveClass: 'active',\n\t\t\topener: '.opener',\n\t\t\tslider: '.slide',\n\t\t\tanimSpeed: 400,\n\t\t\teffect: 'fade',\n\t\t\tevent: 'click'\n\t\t}, options);\n\t\tthis.init();\n\t}\n\tOpenClose.prototype = {\n\t\tinit: function() {\n\t\t\tif (this.options.holder) {\n\t\t\t\tthis.findElements();\n\t\t\t\tthis.attachEvents();\n\t\t\t\tthis.makeCallback('onInit', this);\n\t\t\t}\n\t\t},\n\t\tfindElements: function() {\n\t\t\tthis.holder = $(this.options.holder);\n\t\t\tthis.opener = this.holder.find(this.options.opener);\n\t\t\tthis.slider = this.holder.find(this.options.slider);\n\t\t},\n\t\tattachEvents: function() {\n\t\t\t// add handler\n\t\t\tvar self = this;\n\t\t\tthis.eventHandler = function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (self.slider.hasClass(slideHiddenClass)) {\n\t\t\t\t\tself.showSlide();\n\t\t\t\t} else {\n\t\t\t\t\tself.hideSlide();\n\t\t\t\t}\n\t\t\t};\n      self.slider.attr('aria-hidden', 'true');\n      self.opener.attr('aria-expanded', 'false');\n\t\t\tself.opener.on(self.options.event, this.eventHandler);\n\n\t\t\t// hover mode handler\n\t\t\tif (self.options.event === 'hover') {\n\t\t\t\tself.opener.on('mouseenter', function() {\n\t\t\t\t\tif (!self.holder.hasClass(self.options.activeClass)) {\n\t\t\t\t\t\tself.showSlide();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tself.holder.on('mouseleave', function() {\n\t\t\t\t\tself.hideSlide();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// outside click handler\n\t\t\tself.outsideClickHandler = function(e) {\n\t\t\t\tif (self.options.hideOnClickOutside) {\n\t\t\t\t\tvar target = $(e.target);\n\t\t\t\t\tif (!target.is(self.holder) && !target.closest(self.holder).length) {\n\t\t\t\t\t\tself.hideSlide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// set initial styles\n\t\t\tif (this.holder.hasClass(this.options.activeClass)) {\n\t\t\t\t$(document).on('click touchstart', self.outsideClickHandler);\n\t\t\t} else {\n\t\t\t\tthis.slider.addClass(slideHiddenClass);\n\t\t\t}\n\t\t},\n\t\tshowSlide: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.options.addClassBeforeAnimation) {\n\t\t\t\tself.holder.addClass(self.options.activeClass);\n\t\t\t}\n      self.slider.attr('aria-hidden', 'false');\n      self.opener.attr('aria-expanded', 'true');\n\t\t\tself.slider.removeClass(slideHiddenClass);\n\t\t\t$(document).on('click touchstart', self.outsideClickHandler);\n\n\t\t\tself.makeCallback('animStart', true);\n\t\t\ttoggleEffects[self.options.effect].show({\n\t\t\t\tbox: self.slider,\n\t\t\t\tspeed: self.options.animSpeed,\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tif (!self.options.addClassBeforeAnimation) {\n\t\t\t\t\t\tself.holder.addClass(self.options.activeClass);\n\t\t\t\t\t}\n\t\t\t\t\tself.makeCallback('animEnd', true);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thideSlide: function() {\n\t\t\tvar self = this;\n\t\t\tif (self.options.addClassBeforeAnimation) {\n\t\t\t\tself.holder.removeClass(self.options.activeClass);\n\t\t\t}\n\t\t\t$(document).off('click touchstart', self.outsideClickHandler);\n\n\t\t\tself.makeCallback('animStart', false);\n\t\t\ttoggleEffects[self.options.effect].hide({\n\t\t\t\tbox: self.slider,\n\t\t\t\tspeed: self.options.animSpeed,\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tif (!self.options.addClassBeforeAnimation) {\n\t\t\t\t\t\tself.holder.removeClass(self.options.activeClass);\n\t\t\t\t\t}\n\t\t\t\t\tself.slider.addClass(slideHiddenClass);\n          self.slider.attr('aria-hidden', 'true');\n          self.opener.attr('aria-expanded', 'false');\n\t\t\t\t\tself.makeCallback('animEnd', false);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdestroy: function() {\n\t\t\tthis.slider.removeClass(slideHiddenClass).css({\n\t\t\t\tdisplay: ''\n\t\t\t});\n\t\t\tthis.opener.off(this.options.event, this.eventHandler);\n\t\t\tthis.holder.removeClass(this.options.activeClass).removeData('OpenClose');\n\t\t\t$(document).off('click touchstart', this.outsideClickHandler);\n\t\t},\n\t\tmakeCallback: function(name) {\n\t\t\tif (typeof this.options[name] === 'function') {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.shift();\n\t\t\t\tthis.options[name].apply(this, args);\n\t\t\t}\n\t\t}\n\t};\n\n\t// add stylesheet for slide on DOMReady\n\tvar slideHiddenClass = 'js-slide-hidden';\n\t(function() {\n\t\tvar tabStyleSheet = $('<style type=\"text/css\">')[0];\n\t\tvar tabStyleRule = '.' + slideHiddenClass;\n\t\ttabStyleRule += '{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}';\n\t\tif (tabStyleSheet.styleSheet) {\n\t\t\ttabStyleSheet.styleSheet.cssText = tabStyleRule;\n\t\t} else {\n\t\t\ttabStyleSheet.appendChild(document.createTextNode(tabStyleRule));\n\t\t}\n\t\t$('head').append(tabStyleSheet);\n\t}());\n\n\t// animation effects\n\tvar toggleEffects = {\n\t\tslide: {\n\t\t\tshow: function(o) {\n\t\t\t\to.box.stop(true).hide().slideDown(o.speed, o.complete);\n\t\t\t},\n\t\t\thide: function(o) {\n\t\t\t\to.box.stop(true).slideUp(o.speed, o.complete);\n\t\t\t}\n\t\t},\n\t\tfade: {\n\t\t\tshow: function(o) {\n\t\t\t\to.box.stop(true).hide().fadeIn(o.speed, o.complete);\n\t\t\t},\n\t\t\thide: function(o) {\n\t\t\t\to.box.stop(true).fadeOut(o.speed, o.complete);\n\t\t\t}\n\t\t},\n\t\tnone: {\n\t\t\tshow: function(o) {\n\t\t\t\to.box.hide().show(0, o.complete);\n\t\t\t},\n\t\t\thide: function(o) {\n\t\t\t\to.box.hide(0, o.complete);\n\t\t\t}\n\t\t}\n\t};\n\n\t// jQuery plugin interface\n\t$.fn.openClose = function(opt) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\tvar method = args[0];\n\n\t\treturn this.each(function() {\n\t\t\tvar $holder = jQuery(this);\n\t\t\tvar instance = $holder.data('OpenClose');\n\n\t\t\tif (typeof opt === 'object' || typeof opt === 'undefined') {\n\t\t\t\t$holder.data('OpenClose', new OpenClose($.extend({\n\t\t\t\t\tholder: this\n\t\t\t\t}, opt)));\n\t\t\t} else if (typeof method === 'string' && instance) {\n\t\t\t\tif (typeof instance[method] === 'function') {\n\t\t\t\t\targs.shift();\n\t\t\t\t\tinstance[method].apply(instance, args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n}(jQuery));\n\n/*\n * jQuery Tooltip plugin\n */\n(function ($) {\n\t$.fn.hoverTooltip = function (o) {\n\t\tvar options = $.extend(\n\t\t\t{\n\t\t\t\ttooltipStructure: '<div class=\"hover-tooltip\"><div class=\"tooltip-text\"></div></div>',\n\t\t\t\ttooltipSelector: '.tooltip-text',\n\t\t\t\tpositionTypeX: 'left',\n\t\t\t\tpositionTypeY: 'top',\n\t\t\t\tattribute: 'title',\n\t\t\t\textraOffsetX: 10,\n\t\t\t\textraOffsetY: 10,\n\t\t\t\tshowOnTouchDevice: true,\n\t\t\t},\n\t\t\to\n\t\t);\n\n\t\t// create tooltip\n\t\tvar tooltip = $('<div>').html(options.tooltipStructure).children().css({ position: 'absolute' });\n\t\tvar tooltipTextBox = tooltip.find(options.tooltipSelector);\n\t\tvar tooltipWidth, tooltipHeight;\n\n\t\t// tooltip logic\n\t\tfunction initTooltip(item) {\n\t\t\tvar tooltipText = item.attr(options.attribute);\n\t\t\titem.removeAttr(options.attribute);\n\t\t\tif (!tooltipText) return;\n\n\t\t\tif (isTouchDevice) {\n\t\t\t\tif (options.showOnTouchDevice) {\n\t\t\t\t\titem.bind('touchstart', function (e) {\n\t\t\t\t\t\tshowTooltip(item, tooltipText, getEvent(e));\n\t\t\t\t\t\tjQuery(document).one('touchend', hideTooltip);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem\n\t\t\t\t\t.bind('mouseenter', function (e) {\n\t\t\t\t\t\tshowTooltip(item, tooltipText, e);\n\t\t\t\t\t})\n\t\t\t\t\t.bind('mouseleave', hideTooltip)\n\t\t\t\t\t.bind('mousemove', moveTooltip);\n\t\t\t}\n\t\t}\n\t\tfunction showTooltip(item, text, e) {\n\t\t\ttooltipTextBox.html(text);\n\t\t\ttooltip.appendTo(document.body).show();\n\t\t\ttooltipWidth = tooltip.outerWidth(true);\n\t\t\ttooltipHeight = tooltip.outerHeight(true);\n\t\t\tmoveTooltip(e, item);\n\t\t}\n\t\tfunction hideTooltip() {\n\t\t\ttooltip.remove();\n\t\t}\n\t\tfunction moveTooltip(e) {\n\t\t\tvar top,\n\t\t\t\tleft,\n\t\t\t\tx = e.pageX,\n\t\t\t\ty = e.pageY;\n\n\t\t\tswitch (options.positionTypeY) {\n\t\t\t\tcase 'top':\n\t\t\t\t\ttop = y - tooltipHeight - options.extraOffsetY;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\ttop = y - tooltipHeight / 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom':\n\t\t\t\t\ttop = y + options.extraOffsetY;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch (options.positionTypeX) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tleft = x - tooltipWidth - options.extraOffsetX;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\tleft = x - tooltipWidth / 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tleft = x + options.extraOffsetX;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttooltip.css({\n\t\t\t\ttop: top,\n\t\t\t\tleft: left,\n\t\t\t});\n\t\t}\n\n\t\t// add handlers\n\t\treturn this.each(function () {\n\t\t\tinitTooltip($(this));\n\t\t});\n\t};\n\n\t// parse event\n\tfunction getEvent(e) {\n\t\treturn e.originalEvent.changedTouches ? e.originalEvent.changedTouches[0] : e;\n\t}\n\n\t// detect device type\n\tvar isTouchDevice = (function () {\n\t\ttry {\n\t\t\treturn 'ontouchstart' in window || (window.DocumentTouch && document instanceof DocumentTouch);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t})();\n})(jQuery);\n\n/*\n * jQuery Tabs plugin\n */\n(function ($, $win) {\n\t'use strict';\n\n\tfunction Tabset($holder, options) {\n\t\tthis.$holder = $holder;\n\t\tthis.options = options;\n\n\t\tthis.init();\n\t}\n\n\tTabset.prototype = {\n\t\tinit: function () {\n\t\t\tthis.$tabLinks = this.$holder.find(this.options.tabLinks);\n\n\t\t\tthis.setStartActiveIndex();\n\t\t\tthis.setActiveTab();\n\n\t\t\tif (this.options.autoHeight) {\n\t\t\t\tthis.$tabHolder = $(this.$tabLinks.eq(0).attr(this.options.attrib)).parent();\n\t\t\t}\n\n\t\t\tthis.makeCallback('onInit', this);\n\t\t},\n\n\t\tsetStartActiveIndex: function () {\n\t\t\tvar $classTargets = this.getClassTarget(this.$tabLinks);\n\t\t\tvar $activeLink = $classTargets.filter('.' + this.options.activeClass);\n\t\t\tvar $hashLink = this.$tabLinks.filter('[' + this.options.attrib + '=\"' + location.hash + '\"]');\n\t\t\tvar activeIndex;\n\n\t\t\tif (this.options.checkHash && $hashLink.length) {\n\t\t\t\t$activeLink = $hashLink;\n\t\t\t}\n\n\t\t\tactiveIndex = $classTargets.index($activeLink);\n\n\t\t\tthis.activeTabIndex = this.prevTabIndex = activeIndex === -1 ? (this.options.defaultTab ? 0 : null) : activeIndex;\n\t\t},\n\n\t\tsetActiveTab: function () {\n\t\t\tvar self = this;\n\n\t\t\tthis.$tabLinks.each(function (i, link) {\n\t\t\t\tvar $link = $(link);\n\t\t\t\tvar $classTarget = self.getClassTarget($link);\n\t\t\t\tvar $tab = $($link.attr(self.options.attrib));\n\n\t\t\t\tif (i !== self.activeTabIndex) {\n\t\t\t\t\t$classTarget.removeClass(self.options.activeClass);\n\t\t\t\t\t$tab.addClass(self.options.tabHiddenClass).removeClass(self.options.activeClass);\n\t\t\t\t} else {\n\t\t\t\t\t$classTarget.addClass(self.options.activeClass);\n\t\t\t\t\t$tab.removeClass(self.options.tabHiddenClass).addClass(self.options.activeClass);\n\t\t\t\t}\n\n\t\t\t\tself.attachTabLink($link, i);\n\t\t\t});\n\t\t},\n\n\t\tattachTabLink: function ($link, i) {\n\t\t\tvar self = this;\n\n\t\t\t$link.on(this.options.event + '.tabset', function (e) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif (self.activeTabIndex === self.prevTabIndex && self.activeTabIndex !== i) {\n\t\t\t\t\tself.activeTabIndex = i;\n\t\t\t\t\tself.switchTabs();\n\t\t\t\t}\n\t\t\t\tif (self.options.checkHash) {\n\t\t\t\t\tlocation.hash = jQuery(this).attr('href').split('#')[1];\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tresizeHolder: function (height) {\n\t\t\tvar self = this;\n\n\t\t\tif (height) {\n\t\t\t\tthis.$tabHolder.height(height);\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tself.$tabHolder.addClass('transition');\n\t\t\t\t}, 10);\n\t\t\t} else {\n\t\t\t\tself.$tabHolder.removeClass('transition').height('');\n\t\t\t}\n\t\t},\n\n\t\tswitchTabs: function () {\n\t\t\tvar self = this;\n\n\t\t\tvar $prevLink = this.$tabLinks.eq(this.prevTabIndex);\n\t\t\tvar $nextLink = this.$tabLinks.eq(this.activeTabIndex);\n\n\t\t\tvar $prevTab = this.getTab($prevLink);\n\t\t\tvar $nextTab = this.getTab($nextLink);\n\n\t\t\t$prevTab.removeClass(this.options.activeClass);\n\n\t\t\tif (self.haveTabHolder()) {\n\t\t\t\tthis.resizeHolder($prevTab.outerHeight());\n\t\t\t}\n\n\t\t\tsetTimeout(\n\t\t\t\tfunction () {\n\t\t\t\t\tself.getClassTarget($prevLink).removeClass(self.options.activeClass);\n\n\t\t\t\t\t$prevTab.addClass(self.options.tabHiddenClass);\n\t\t\t\t\t$nextTab.removeClass(self.options.tabHiddenClass).addClass(self.options.activeClass);\n\n\t\t\t\t\tself.getClassTarget($nextLink).addClass(self.options.activeClass);\n\n\t\t\t\t\tif (self.haveTabHolder()) {\n\t\t\t\t\t\tself.resizeHolder($nextTab.outerHeight());\n\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tself.resizeHolder();\n\t\t\t\t\t\t\tself.prevTabIndex = self.activeTabIndex;\n\t\t\t\t\t\t\tself.makeCallback('onChange', self);\n\t\t\t\t\t\t}, self.options.animSpeed);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.prevTabIndex = self.activeTabIndex;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tthis.options.autoHeight ? this.options.animSpeed : 1\n\t\t\t);\n\t\t},\n\n\t\tgetClassTarget: function ($link) {\n\t\t\treturn this.options.addToParent ? $link.parent() : $link;\n\t\t},\n\n\t\tgetActiveTab: function () {\n\t\t\treturn this.getTab(this.$tabLinks.eq(this.activeTabIndex));\n\t\t},\n\n\t\tgetTab: function ($link) {\n\t\t\treturn $($link.attr(this.options.attrib));\n\t\t},\n\n\t\thaveTabHolder: function () {\n\t\t\treturn this.$tabHolder && this.$tabHolder.length;\n\t\t},\n\n\t\tdestroy: function () {\n\t\t\tvar self = this;\n\n\t\t\tthis.$tabLinks.off('.tabset').each(function () {\n\t\t\t\tvar $link = $(this);\n\n\t\t\t\tself.getClassTarget($link).removeClass(self.options.activeClass);\n\t\t\t\t$($link.attr(self.options.attrib)).removeClass(self.options.activeClass + ' ' + self.options.tabHiddenClass);\n\t\t\t});\n\n\t\t\tthis.$holder.removeData('Tabset');\n\t\t},\n\n\t\tmakeCallback: function (name) {\n\t\t\tif (typeof this.options[name] === 'function') {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.shift();\n\t\t\t\tthis.options[name].apply(this, args);\n\t\t\t}\n\t\t},\n\t};\n\n\t$.fn.tabset = function (opt) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\tvar method = args[0];\n\n\t\tvar options = $.extend(\n\t\t\t{\n\t\t\t\tactiveClass: 'active',\n\t\t\t\taddToParent: false,\n\t\t\t\tautoHeight: false,\n\t\t\t\tcheckHash: false,\n\t\t\t\tdefaultTab: true,\n\t\t\t\tanimSpeed: 500,\n\t\t\t\ttabLinks: 'a',\n\t\t\t\tattrib: 'href',\n\t\t\t\tevent: 'click',\n\t\t\t\ttabHiddenClass: 'js-tab-hidden',\n\t\t\t},\n\t\t\topt\n\t\t);\n\t\toptions.autoHeight = options.autoHeight;\n\n\t\treturn this.each(function () {\n\t\t\tvar $holder = jQuery(this);\n\t\t\tvar instance = $holder.data('Tabset');\n\n\t\t\tif (typeof opt === 'object' || typeof opt === 'undefined') {\n\t\t\t\t$holder.data('Tabset', new Tabset($holder, options));\n\t\t\t} else if (typeof method === 'string' && instance) {\n\t\t\t\tif (typeof instance[method] === 'function') {\n\t\t\t\t\targs.shift();\n\t\t\t\t\tinstance[method].apply(instance, args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n})(jQuery, jQuery(window));\n\n/*\n * jQuery sticky box plugin\n */\n(function ($, $win) {\n\t'use strict';\n\n\tfunction StickyScrollBlock($stickyBox, options) {\n\t\tthis.options = options;\n\t\tthis.$stickyBox = $stickyBox;\n\t\tthis.init();\n\t}\n\n\tvar StickyScrollBlockPrototype = {\n\t\tinit: function () {\n\t\t\tthis.findElements();\n\t\t\tthis.attachEvents();\n\t\t\tthis.makeCallback('onInit');\n\t\t},\n\n\t\tfindElements: function () {\n\t\t\t// find parent container in which will be box move\n\t\t\tthis.$container = this.$stickyBox.closest(this.options.container);\n\t\t\t// define box wrap flag\n\t\t\tthis.isWrap = this.options.positionType === 'fixed' && this.options.setBoxHeight;\n\t\t\t// define box move flag\n\t\t\tthis.moveInContainer = !!this.$container.length;\n\t\t\t// wrapping box to set place in content\n\t\t\tif (this.isWrap) {\n\t\t\t\tthis.$stickyBoxWrap = this.$stickyBox.wrap('<div class=\"' + this.getWrapClass() + '\"/>').parent();\n\t\t\t}\n\t\t\t//define block to add active class\n\t\t\tthis.parentForActive = this.getParentForActive();\n\t\t\tthis.isInit = true;\n\t\t},\n\n\t\tattachEvents: function () {\n\t\t\tvar self = this;\n\n\t\t\t// bind events\n\t\t\tthis.onResize = function () {\n\t\t\t\tif (!self.isInit) return;\n\t\t\t\tself.resetState();\n\t\t\t\tself.recalculateOffsets();\n\t\t\t\tself.checkStickyPermission();\n\t\t\t\tself.scrollHandler();\n\t\t\t};\n\n\t\t\tthis.onScroll = function () {\n\t\t\t\tself.scrollHandler();\n\t\t\t};\n\n\t\t\t// initial handler call\n\t\t\tthis.onResize();\n\n\t\t\t// handle events\n\t\t\t$win.on('load resize orientationchange', this.onResize).on('scroll', this.onScroll);\n\t\t},\n\n\t\tdefineExtraTop: function () {\n\t\t\t// define box's extra top dimension\n\t\t\tvar extraTop;\n\n\t\t\tif (typeof this.options.extraTop === 'number') {\n\t\t\t\textraTop = this.options.extraTop;\n\t\t\t} else if (typeof this.options.extraTop === 'function') {\n\t\t\t\textraTop = this.options.extraTop();\n\t\t\t}\n\n\t\t\tthis.extraTop = this.options.positionType === 'absolute' ? extraTop : Math.min(this.winParams.height - this.data.boxFullHeight, extraTop);\n\t\t},\n\n\t\tcheckStickyPermission: function () {\n\t\t\t// check the permission to set sticky\n\t\t\tthis.isStickyEnabled = this.moveInContainer\n\t\t\t\t? this.data.containerOffsetTop + this.data.containerHeight > this.data.boxFullHeight + this.data.boxOffsetTop + this.options.extraBottom\n\t\t\t\t: true;\n\t\t},\n\n\t\tgetParentForActive: function () {\n\t\t\tif (this.isWrap) {\n\t\t\t\treturn this.$stickyBoxWrap;\n\t\t\t}\n\n\t\t\tif (this.$container.length) {\n\t\t\t\treturn this.$container;\n\t\t\t}\n\n\t\t\treturn this.$stickyBox;\n\t\t},\n\n\t\tgetWrapClass: function () {\n\t\t\t// get set of container classes\n\t\t\ttry {\n\t\t\t\treturn this.$stickyBox\n\t\t\t\t\t.attr('class')\n\t\t\t\t\t.split(' ')\n\t\t\t\t\t.map(function (name) {\n\t\t\t\t\t\treturn 'sticky-wrap-' + name;\n\t\t\t\t\t})\n\t\t\t\t\t.join(' ');\n\t\t\t} catch (err) {\n\t\t\t\treturn 'sticky-wrap';\n\t\t\t}\n\t\t},\n\n\t\tresetState: function () {\n\t\t\t// reset dimensions and state\n\t\t\tthis.stickyFlag = false;\n\t\t\tthis.$stickyBox\n\t\t\t\t.css({\n\t\t\t\t\t'-webkit-transition': '',\n\t\t\t\t\t'-webkit-transform': '',\n\t\t\t\t\ttransition: '',\n\t\t\t\t\ttransform: '',\n\t\t\t\t\tposition: '',\n\t\t\t\t\twidth: '',\n\t\t\t\t\tleft: '',\n\t\t\t\t\ttop: '',\n\t\t\t\t})\n\t\t\t\t.removeClass(this.options.activeClass);\n\n\t\t\tif (this.isWrap) {\n\t\t\t\tthis.$stickyBoxWrap.removeClass(this.options.activeClass).removeAttr('style');\n\t\t\t}\n\n\t\t\tif (this.moveInContainer) {\n\t\t\t\tthis.$container.removeClass(this.options.activeClass);\n\t\t\t}\n\t\t},\n\n\t\trecalculateOffsets: function () {\n\t\t\t// define box and container dimensions\n\t\t\tthis.winParams = this.getWindowParams();\n\n\t\t\tthis.data = $.extend(this.getBoxOffsets(), this.getContainerOffsets());\n\n\t\t\tthis.defineExtraTop();\n\t\t},\n\n\t\tgetBoxOffsets: function () {\n\t\t\tfunction offetTop(obj) {\n\t\t\t\tobj.top = 0;\n\t\t\t\treturn obj;\n\t\t\t}\n\t\t\tvar boxOffset = this.$stickyBox.css('position') === 'fixed' ? offetTop(this.$stickyBox.offset()) : this.$stickyBox.offset();\n\t\t\tvar boxPosition = this.$stickyBox.position();\n\n\t\t\treturn {\n\t\t\t\t// sticky box offsets\n\t\t\t\tboxOffsetLeft: boxOffset.left,\n\t\t\t\tboxOffsetTop: boxOffset.top,\n\t\t\t\t// sticky box positions\n\t\t\t\tboxTopPosition: boxPosition.top,\n\t\t\t\tboxLeftPosition: boxPosition.left,\n\t\t\t\t// sticky box width/height\n\t\t\t\tboxFullHeight: this.$stickyBox.outerHeight(true),\n\t\t\t\tboxHeight: this.$stickyBox.outerHeight(),\n\t\t\t\tboxWidth: this.$stickyBox.outerWidth(),\n\t\t\t};\n\t\t},\n\n\t\tgetContainerOffsets: function () {\n\t\t\tvar containerOffset = this.moveInContainer ? this.$container.offset() : null;\n\n\t\t\treturn containerOffset\n\t\t\t\t? {\n\t\t\t\t\t// container offsets\n\t\t\t\t\tcontainerOffsetLeft: containerOffset.left,\n\t\t\t\t\tcontainerOffsetTop: containerOffset.top,\n\t\t\t\t\t// container height\n\t\t\t\t\tcontainerHeight: this.$container.outerHeight(),\n\t\t\t\t}\n\t\t\t\t: {};\n\t\t},\n\n\t\tgetWindowParams: function () {\n\t\t\treturn {\n\t\t\t\theight: window.innerHeight || document.documentElement.clientHeight,\n\t\t\t};\n\t\t},\n\n\t\tmakeCallback: function (name) {\n\t\t\tif (typeof this.options[name] === 'function') {\n\t\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\t\targs.shift();\n\t\t\t\tthis.options[name].apply(this, args);\n\t\t\t}\n\t\t},\n\n\t\tdestroy: function () {\n\t\t\tthis.isInit = false;\n\t\t\t// remove event handlers and styles\n\t\t\t$win.off('load resize orientationchange', this.onResize).off('scroll', this.onScroll);\n\t\t\tthis.resetState();\n\t\t\tthis.$stickyBox.removeData('StickyScrollBlock');\n\t\t\tif (this.isWrap) {\n\t\t\t\tthis.$stickyBox.unwrap();\n\t\t\t}\n\t\t\tthis.makeCallback('onDestroy');\n\t\t},\n\t};\n\n\tvar stickyMethods = {\n\t\tfixed: {\n\t\t\tscrollHandler: function () {\n\t\t\t\tthis.winScrollTop = $win.scrollTop();\n\t\t\t\tvar isActiveSticky =\n\t\t\t\t\tthis.winScrollTop - (this.options.showAfterScrolled ? this.extraTop : 0) - (this.options.showAfterScrolled ? this.data.boxHeight + this.extraTop : 0) >\n\t\t\t\t\tthis.data.boxOffsetTop - this.extraTop;\n\n\t\t\t\tif (isActiveSticky) {\n\t\t\t\t\tthis.isStickyEnabled && this.stickyOn();\n\t\t\t\t} else {\n\t\t\t\t\tthis.stickyOff();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstickyOn: function () {\n\t\t\t\tif (!this.stickyFlag) {\n\t\t\t\t\tthis.stickyFlag = true;\n\t\t\t\t\tthis.parentForActive.addClass(this.options.activeClass);\n\t\t\t\t\tthis.$stickyBox.css({\n\t\t\t\t\t\twidth: this.data.boxWidth,\n\t\t\t\t\t\tposition: this.options.positionType,\n\t\t\t\t\t});\n\t\t\t\t\tif (this.isWrap) {\n\t\t\t\t\t\tthis.$stickyBoxWrap.css({\n\t\t\t\t\t\t\theight: this.data.boxFullHeight,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthis.makeCallback('fixedOn');\n\t\t\t\t}\n\t\t\t\tthis.setDynamicPosition();\n\t\t\t},\n\n\t\t\tstickyOff: function () {\n\t\t\t\tif (this.stickyFlag) {\n\t\t\t\t\tthis.stickyFlag = false;\n\t\t\t\t\tthis.resetState();\n\t\t\t\t\tthis.makeCallback('fixedOff');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetDynamicPosition: function () {\n\t\t\t\tthis.$stickyBox.css({\n\t\t\t\t\ttop: this.getTopPosition(),\n\t\t\t\t\tleft: this.data.boxOffsetLeft - $win.scrollLeft(),\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetTopPosition: function () {\n\t\t\t\tif (this.moveInContainer) {\n\t\t\t\t\tvar currScrollTop = this.winScrollTop + this.data.boxHeight + this.options.extraBottom;\n\n\t\t\t\t\treturn Math.min(this.extraTop, this.data.containerHeight + this.data.containerOffsetTop - currScrollTop);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.extraTop;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tabsolute: {\n\t\t\tscrollHandler: function () {\n\t\t\t\tthis.winScrollTop = $win.scrollTop();\n\t\t\t\tvar isActiveSticky = this.winScrollTop > this.data.boxOffsetTop - this.extraTop;\n\n\t\t\t\tif (isActiveSticky) {\n\t\t\t\t\tthis.isStickyEnabled && this.stickyOn();\n\t\t\t\t} else {\n\t\t\t\t\tthis.stickyOff();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstickyOn: function () {\n\t\t\t\tif (!this.stickyFlag) {\n\t\t\t\t\tthis.stickyFlag = true;\n\t\t\t\t\tthis.parentForActive.addClass(this.options.activeClass);\n\t\t\t\t\tthis.$stickyBox.css({\n\t\t\t\t\t\twidth: this.data.boxWidth,\n\t\t\t\t\t\ttransition: 'transform ' + this.options.animSpeed + 's ease',\n\t\t\t\t\t\t'-webkit-transition': 'transform ' + this.options.animSpeed + 's ease',\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.isWrap) {\n\t\t\t\t\t\tthis.$stickyBoxWrap.css({\n\t\t\t\t\t\t\theight: this.data.boxFullHeight,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.makeCallback('fixedOn');\n\t\t\t\t}\n\n\t\t\t\tthis.clearTimer();\n\t\t\t\tthis.timer = setTimeout(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tthis.setDynamicPosition();\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tthis.options.animDelay * 1000\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tstickyOff: function () {\n\t\t\t\tif (this.stickyFlag) {\n\t\t\t\t\tthis.clearTimer();\n\t\t\t\t\tthis.stickyFlag = false;\n\n\t\t\t\t\tthis.timer = setTimeout(\n\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\tthis.setDynamicPosition();\n\t\t\t\t\t\t\tsetTimeout(\n\t\t\t\t\t\t\t\tfunction () {\n\t\t\t\t\t\t\t\t\tthis.resetState();\n\t\t\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\t\t\tthis.options.animSpeed * 1000\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\tthis.options.animDelay * 1000\n\t\t\t\t\t);\n\t\t\t\t\tthis.makeCallback('fixedOff');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearTimer: function () {\n\t\t\t\tclearTimeout(this.timer);\n\t\t\t},\n\n\t\t\tsetDynamicPosition: function () {\n\t\t\t\tvar topPosition = Math.max(0, this.getTopPosition());\n\n\t\t\t\tthis.$stickyBox.css({\n\t\t\t\t\ttransform: 'translateY(' + topPosition + 'px)',\n\t\t\t\t\t'-webkit-transform': 'translateY(' + topPosition + 'px)',\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tgetTopPosition: function () {\n\t\t\t\tvar currTopPosition = this.winScrollTop - this.data.boxOffsetTop + this.extraTop;\n\n\t\t\t\tif (this.moveInContainer) {\n\t\t\t\t\tvar currScrollTop = this.winScrollTop + this.data.boxHeight + this.options.extraBottom;\n\t\t\t\t\tvar diffOffset = Math.abs(Math.min(0, this.data.containerHeight + this.data.containerOffsetTop - currScrollTop - this.extraTop));\n\n\t\t\t\t\treturn currTopPosition - diffOffset;\n\t\t\t\t} else {\n\t\t\t\t\treturn currTopPosition;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n\n\t// jQuery plugin interface\n\t$.fn.stickyScrollBlock = function (opt) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\tvar method = args[0];\n\n\t\tvar options = $.extend(\n\t\t\t{\n\t\t\t\tcontainer: null,\n\t\t\t\tpositionType: 'fixed', // 'fixed' or 'absolute'\n\t\t\t\tactiveClass: 'fixed-position',\n\t\t\t\tsetBoxHeight: true,\n\t\t\t\tshowAfterScrolled: false,\n\t\t\t\textraTop: 0,\n\t\t\t\textraBottom: 0,\n\t\t\t\tanimDelay: 0.1,\n\t\t\t\tanimSpeed: 0.2,\n\t\t\t},\n\t\t\topt\n\t\t);\n\n\t\treturn this.each(function () {\n\t\t\tvar $stickyBox = jQuery(this);\n\t\t\tvar instance = $stickyBox.data('StickyScrollBlock');\n\n\t\t\tif (typeof opt === 'object' || typeof opt === 'undefined') {\n\t\t\t\tStickyScrollBlock.prototype = $.extend(stickyMethods[options.positionType], StickyScrollBlockPrototype);\n\t\t\t\t$stickyBox.data('StickyScrollBlock', new StickyScrollBlock($stickyBox, options));\n\t\t\t} else if (typeof method === 'string' && instance) {\n\t\t\t\tif (typeof instance[method] === 'function') {\n\t\t\t\t\targs.shift();\n\t\t\t\t\tinstance[method].apply(instance, args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\t// module exports\n\twindow.StickyScrollBlock = StickyScrollBlock;\n})(jQuery, jQuery(window));\n\n/*\n * Responsive Layout helper\n */\nwindow.ResponsiveHelper = (function ($) {\n\t// init variables\n\tvar handlers = [],\n\t\tprevWinWidth,\n\t\twin = $(window),\n\t\tnativeMatchMedia = false;\n\n\t// detect match media support\n\tif (window.matchMedia) {\n\t\tif (window.Window && window.matchMedia === Window.prototype.matchMedia) {\n\t\t\tnativeMatchMedia = true;\n\t\t} else if (window.matchMedia.toString().indexOf('native') > -1) {\n\t\t\tnativeMatchMedia = true;\n\t\t}\n\t}\n\n\t// prepare resize handler\n\tfunction resizeHandler() {\n\t\tvar winWidth = win.width();\n\t\tif (winWidth !== prevWinWidth) {\n\t\t\tprevWinWidth = winWidth;\n\n\t\t\t// loop through range groups\n\t\t\t$.each(handlers, function (index, rangeObject) {\n\t\t\t\t// disable current active area if needed\n\t\t\t\t$.each(rangeObject.data, function (property, item) {\n\t\t\t\t\tif (item.currentActive && !matchRange(item.range[0], item.range[1])) {\n\t\t\t\t\t\titem.currentActive = false;\n\t\t\t\t\t\tif (typeof item.disableCallback === 'function') {\n\t\t\t\t\t\t\titem.disableCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// enable areas that match current width\n\t\t\t\t$.each(rangeObject.data, function (property, item) {\n\t\t\t\t\tif (!item.currentActive && matchRange(item.range[0], item.range[1])) {\n\t\t\t\t\t\t// make callback\n\t\t\t\t\t\titem.currentActive = true;\n\t\t\t\t\t\tif (typeof item.enableCallback === 'function') {\n\t\t\t\t\t\t\titem.enableCallback();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\twin.bind('load resize orientationchange', resizeHandler);\n\n\t// test range\n\tfunction matchRange(r1, r2) {\n\t\tvar mediaQueryString = '';\n\t\tif (r1 > 0) {\n\t\t\tmediaQueryString += '(min-width: ' + r1 + 'px)';\n\t\t}\n\t\tif (r2 < Infinity) {\n\t\t\tmediaQueryString += (mediaQueryString ? ' and ' : '') + '(max-width: ' + r2 + 'px)';\n\t\t}\n\t\treturn matchQuery(mediaQueryString, r1, r2);\n\t}\n\n\t// media query function\n\tfunction matchQuery(query, r1, r2) {\n\t\tif (window.matchMedia && nativeMatchMedia) {\n\t\t\treturn matchMedia(query).matches;\n\t\t} else if (window.styleMedia) {\n\t\t\treturn styleMedia.matchMedium(query);\n\t\t} else if (window.media) {\n\t\t\treturn media.matchMedium(query);\n\t\t} else {\n\t\t\treturn prevWinWidth >= r1 && prevWinWidth <= r2;\n\t\t}\n\t}\n\n\t// range parser\n\tfunction parseRange(rangeStr) {\n\t\tvar rangeData = rangeStr.split('..');\n\t\tvar x1 = parseInt(rangeData[0], 10) || -Infinity;\n\t\tvar x2 = parseInt(rangeData[1], 10) || Infinity;\n\t\treturn [x1, x2].sort(function (a, b) {\n\t\t\treturn a - b;\n\t\t});\n\t}\n\n\t// export public functions\n\treturn {\n\t\taddRange: function (ranges) {\n\t\t\t// parse data and add items to collection\n\t\t\tvar result = { data: {} };\n\t\t\t$.each(ranges, function (property, data) {\n\t\t\t\tresult.data[property] = {\n\t\t\t\t\trange: parseRange(property),\n\t\t\t\t\tenableCallback: data.on,\n\t\t\t\t\tdisableCallback: data.off,\n\t\t\t\t};\n\t\t\t});\n\t\t\thandlers.push(result);\n\n\t\t\t// call resizeHandler to recalculate all events\n\t\t\tprevWinWidth = null;\n\t\t\tresizeHandler();\n\t\t},\n\t};\n})(jQuery);\n"]}